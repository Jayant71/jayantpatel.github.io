---
import publications from "../data/publications.json";

const iconMap: Record<string, string> = {
    "file-text":
        '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><line x1="10" y1="9" x2="8" y2="9"></line></svg>',
    code: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="16 18 22 12 16 6"></polyline><polyline points="8 6 2 12 8 18"></polyline></svg>',
    play: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><polygon points="10 8 16 12 10 16 10 8"></polygon></svg>',
    database:
        '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><ellipse cx="12" cy="5" rx="9" ry="3"></ellipse><path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"></path><path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"></path></svg>',
};
---

<section id="publications" class="publications-section">
    <div class="container">
        <div class="section-header">
            <h2 class="section-title">Selected Publications</h2>
            <a
                href="https://scholar.google.com"
                target="_blank"
                class="scholar-link"
            >
                View Google Scholar
                <svg
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    ><line x1="5" y1="12" x2="19" y2="12"></line><polyline
                        points="12 5 19 12 12 19"></polyline>
                </svg>
            </a>
        </div>

        <div class="publications-list">
            {
                publications.map((pub) => (
                    <div class="publication-card">
                        <div class="pub-image">
                            <img src={pub.image} alt={pub.title} />
                        </div>
                        <div class="pub-content">
                            <h3 class="pub-title">
                                <a href={`/research/${pub.id}`}>{pub.title}</a>
                            </h3>
                            <div class="pub-authors" set:html={pub.authors} />
                            <div class="pub-meta">
                                <span class="pub-venue">{pub.venue}</span>
                                {pub.badge && (
                                    <span class="badge">{pub.badge}</span>
                                )}
                            </div>
                            <div class="pub-links">
                                {pub.links.map((link) => (
                                    <a
                                        href={link.url}
                                        class="btn btn-outline pub-link-btn"
                                        target="_blank"
                                    >
                                        <span
                                            class="btn-icon"
                                            set:html={iconMap[link.icon] || ""}
                                        />
                                        {link.label}
                                    </a>
                                ))}
                            </div>
                        </div>
                    </div>
                ))
            }
        </div>
    </div>
</section>

<style>
    .publications-section {
        padding: 3rem 0;
    }
    .section-header {
        display: flex;
        justify-content: space-between;
        align-items: baseline;
        margin-bottom: 3rem;
    }
    .section-title {
        font-size: 2rem;
        font-weight: 700;
    }
    .scholar-link {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        font-size: 0.875rem;
        font-weight: 500;
    }
    .scholar-link svg {
        width: 16px;
        height: 16px;
    }
    .publications-list {
        display: flex;
        flex-direction: column;
        gap: 3rem;
    }
    .publication-card {
        display: flex;
        gap: 2rem;
    }
    .pub-image {
        flex-shrink: 0;
        width: 240px;
        height: 140px;
        border-radius: 0.75rem;
        overflow: hidden;
        background-color: var(--color-bg-alt);
        border: 1px solid var(--color-border);
    }
    .pub-image img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.3s ease;
    }
    .publication-card:hover .pub-image img {
        transform: scale(1.05);
    }
    .pub-content {
        flex-grow: 1;
        display: flex;
        flex-direction: column;
        justify-content: center;
    }
    .pub-title {
        font-size: 1.25rem;
        font-weight: 600;
        margin-bottom: 0.5rem;
        line-height: 1.4;
    }
    .pub-title a {
        color: var(--color-text);
    }
    .pub-title a:hover {
        color: var(--color-primary);
        text-decoration: none;
    }
    .pub-authors {
        color: var(--color-text-muted);
        font-size: 0.95rem;
        margin-bottom: 0.5rem;
    }
    .pub-authors :global(strong) {
        color: var(--color-text);
        font-weight: 600;
    }
    .pub-meta {
        display: flex;
        align-items: center;
        gap: 1rem;
        margin-bottom: 1.25rem;
        font-size: 0.875rem;
        font-style: italic;
        color: var(--color-text-muted);
    }
    .pub-links {
        display: flex;
        gap: 0.75rem;
        flex-wrap: wrap;
    }
    .pub-link-btn {
        padding: 0.25rem 0.75rem;
        font-size: 0.8rem;
    }
    .pub-link-btn .btn-icon {
        width: 14px;
        height: 14px;
        margin-right: 0.4rem;
        display: inline-flex;
    }

    @media (max-width: 768px) {
        .publication-card {
            flex-direction: column;
            gap: 1.5rem;
        }
        .pub-image {
            width: 100%;
            height: 200px;
        }
    }
</style>
